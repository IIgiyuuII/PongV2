System.register("chunks:///_virtual/Ball.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,r,a,o,l,n,s,u,h,d,c;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,r=i.initializerDefineProperty,a=i.assertThisInitialized},function(i){o=i.cclegacy,l=i._decorator,n=i.Node,s=i.AudioSource,u=i.AudioClip,h=i.UITransform,d=i.Vec3,c=i.Component}],execute:function(){var p,f,y,S,b,g,x,m,R,v,w,z,M,P,B,C,L,W;o._RF.push({},"e5268vX12RA4Kq8AGcwpFxJ","Ball",void 0);var A=l.ccclass,k=l.property;i("Ball",(p=A("Ball"),f=k(n),y=k(n),S=k(n),b=k({type:s}),g=k({type:u}),x=k({type:u}),m=k({type:u}),p((w=t((v=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return t=i.call.apply(i,[this].concat(o))||this,r(t,"speed",w,a(t)),r(t,"paddleLeft",z,a(t)),r(t,"paddleRight",M,a(t)),r(t,"scoreManager",P,a(t)),r(t,"audioSource",B,a(t)),r(t,"hitPaddleSfx",C,a(t)),r(t,"hitWallSfx",L,a(t)),r(t,"goalSfx",W,a(t)),t.direction=new d(1,1,0),t.ballRadius=10,t.fieldWidth=1280,t.fieldHeight=680,t}e(t,i);var o=t.prototype;return o.start=function(){this.resetBall()},o.update=function(i){var t=this.node.position;t.x+=this.direction.x*this.speed*i,t.y+=this.direction.y*this.speed*i;var e=this.fieldHeight/2-this.ballRadius;(t.y>e||t.y<-e)&&(this.direction.y*=-1,this.audioSource&&this.hitWallSfx&&this.audioSource.playOneShot(this.hitWallSfx),t.y=Math.min(Math.max(t.y,-e),e)),this.paddleLeft&&this.checkCollision(this.paddleLeft,t,1)&&(this.direction.x=1,this.audioSource&&this.hitPaddleSfx&&this.audioSource.playOneShot(this.hitPaddleSfx)),this.paddleRight&&this.checkCollision(this.paddleRight,t,-1)&&(this.direction.x=-1,this.audioSource&&this.hitPaddleSfx&&this.audioSource.playOneShot(this.hitPaddleSfx));var r=this.fieldWidth/2;t.x<-r-this.ballRadius?this.onScore("right"):t.x>r+this.ballRadius&&this.onScore("left"),this.node.setPosition(t)},o.checkCollision=function(i,t,e){var r=i.position,a=i.getComponent(h);if(!a)return!1;var o=a.width/2,l=a.height/2,n=r.x-o,s=r.x+o,u=r.y+l,d=r.y-l;return t.x+this.ballRadius>n&&t.x-this.ballRadius<s&&t.y+this.ballRadius>d&&t.y-this.ballRadius<u&&(t.x=r.x+e*(o+this.ballRadius+1),!0)},o.onScore=function(i){if(this.audioSource&&this.goalSfx&&this.audioSource.playOneShot(this.goalSfx),this.scoreManager){var t=this.scoreManager.getComponent("ScoreManager");t&&t.addScore(i)}this.resetBall(i)},o.resetBall=function(i){this.node.setPosition(new d(0,0,0));var t="left"===i?1:"right"===i||Math.random()<.5?-1:1,e=Math.random()<.5?-1:1;this.direction.set(t,e,0)},t}(c)).prototype,"speed",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 600}}),z=t(v.prototype,"paddleLeft",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(v.prototype,"paddleRight",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(v.prototype,"scoreManager",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(v.prototype,"audioSource",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(v.prototype,"hitPaddleSfx",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(v.prototype,"hitWallSfx",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(v.prototype,"goalSfx",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=v))||R));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScoreManager.ts"],(function(e){var a,r,t,n,i,l,o,s,c,u;return{setters:[function(e){a=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,o=e.Node,s=e.Label,c=e.Component},function(e){u=e.ScoreManager}],execute:function(){var g,h,p,f,m,b,v,d,M,y,w,G,O,L,P;i._RF.push({},"1cfcfsZXLxJXo6DhT9Uva7p","GameManager",void 0);var S=l.ccclass,z=l.property;e("GameManager",(g=S("GameManager"),h=z(o),p=z(s),f=z(o),m=z(o),b=z(o),v=z(u),g((y=a((M=function(e){function a(){for(var a,r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=e.call.apply(e,[this].concat(i))||this,t(a,"gameOverPanel",y,n(a)),t(a,"winnerLabel",w,n(a)),t(a,"ball",G,n(a)),t(a,"paddleLeft",O,n(a)),t(a,"paddleRight",L,n(a)),t(a,"scoreManager",P,n(a)),a.maxScore=2,a.isGameOver=!1,a}r(a,e);var i=a.prototype;return i.start=function(){this.gameOverPanel&&(this.gameOverPanel.active=!1)},i.update=function(e){this.isGameOver||this.scoreManager&&(this.scoreManager.leftScore>=this.maxScore&&this.endGame("Игрок 1"),this.scoreManager.rightScore>=this.maxScore&&this.endGame("Игрок 2"))},i.endGame=function(e){if(this.isGameOver=!0,this.ball){var a=this.ball.getComponent("Ball");a&&(a.speed=0)}this.gameOverPanel&&(this.gameOverPanel.active=!0),this.winnerLabel&&(this.winnerLabel.string="Победитель: "+e)},i.onNewGame=function(){if(this.isGameOver=!1,this.gameOverPanel&&(this.gameOverPanel.active=!1),this.scoreManager&&(this.scoreManager.leftScore=0,this.scoreManager.rightScore=0,this.scoreManager.updateLabel()),this.ball){var e=this.ball.getComponent("Ball");e&&e.resetBall()}if(this.ball){var a=this.ball.getComponent("Ball");a&&(a.speed=300)}},a}(c)).prototype,"gameOverPanel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=a(M.prototype,"winnerLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=a(M.prototype,"ball",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=a(M.prototype,"paddleLeft",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=a(M.prototype,"paddleRight",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=a(M.prototype,"scoreManager",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=M))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/index.js",["./cjs-loader.mjs"],(function(e,t){var a;return{setters:[function(e){a=e.default}],execute:function(){e("default",void 0);var i=e("__cjsMetaURL",t.meta.url);a.define(i,(function(t,a,i,n,r){var o,s;System.register("chunks:///_virtual/builtin-pipeline-settings.ts",["./rollupPluginModLoBabelHelpers.js","cc","./builtin-pipeline-types.ts"],(function(e){var t,a,i,n,r,o,s,l,d,h,p,c,u,g,m,f,S,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.createClass,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,l=e.Camera,d=e.CCBoolean,h=e.CCInteger,p=e.CCFloat,c=e.Material,u=e.Texture2D,g=e.rendering,m=e.Component},function(e){f=e.BloomType,S=e.fillRequiredPipelineSettings,b=e.makePipelineSettings}],execute:function(){var _,w,P,M,y,v,R,T,C,E,x,A,D,F,L,O,B,N,G,Q,k,H,z,I,W,U,j,V,X,K,q,Y,Z;o._RF.push({},"de1c2EHcMhAIYRZY5nyTQHG","builtin-pipeline-settings",void 0);var J=s.ccclass,$=s.disallowMultiple,ee=s.executeInEditMode,te=s.menu,ae=s.property,ie=s.requireComponent,ne=s.type;e("BuiltinPipelineSettings",(_=J("BuiltinPipelineSettings"),w=te("Rendering/BuiltinPipelineSettings"),P=ie(l),M=ae(d),y=ae({displayName:"Editor Preview (Experimental)",type:d}),v=ae({group:{id:"MSAA",name:"Multisample Anti-Aliasing"},type:d}),R=ae({group:{id:"MSAA",name:"Multisample Anti-Aliasing",style:"section"},type:h,range:[2,4,2]}),T=ae({group:{id:"ShadingScale",name:"ShadingScale",style:"section"},type:d}),C=ae({tooltip:"i18n:postprocess.shadingScale",group:{id:"ShadingScale",name:"ShadingScale"},type:p,range:[.01,4,.01],slide:!0}),E=ae({group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:d}),x=ne(f),A=ae({group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"}}),D=ae({group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:c}),F=ae({group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:c}),L=ae({tooltip:"i18n:bloom.enableAlphaMask",group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:d}),O=ae({tooltip:"i18n:bloom.iterations",group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:h,range:[1,6,1],slide:!0}),B=ae({tooltip:"i18n:bloom.threshold",group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:p,min:0}),N=ne(p),G=ae({group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"}}),Q=ae({group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:d}),k=ae({group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:c}),H=ae({tooltip:"i18n:color_grading.contribute",group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:p,range:[0,1,.01],slide:!0}),z=ae({tooltip:"i18n:color_grading.originalMap",group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:u}),I=ae({group:{id:"FXAA",name:"Fast Approximate Anti-Aliasing (PostProcessing)",style:"section"},type:d}),W=ae({group:{id:"FXAA",name:"Fast Approximate Anti-Aliasing (PostProcessing)",style:"section"},type:c}),U=ae({group:{id:"FSR",name:"FidelityFX Super Resolution",style:"section"},type:d}),j=ae({group:{id:"FSR",name:"FidelityFX Super Resolution",style:"section"},type:c}),V=ae({group:{id:"FSR",name:"FidelityFX Super Resolution",style:"section"},type:p,range:[0,1,.01],slide:!0}),X=ae({group:{id:"ToneMapping",name:"ToneMapping",style:"section"},type:c}),_(K=w(K=P(K=$(K=ee((Y=t((q=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"_settings",Y,r(t)),n(t,"_editorPreview",Z,r(t)),t}a(t,e);var o=t.prototype;return o.getPipelineSettings=function(){return this._settings},o.onEnable=function(){S(this._settings),this.getComponent(l).camera.pipelineSettings=this._settings},o.onDisable=function(){var e=this.getComponent(l).camera;e&&(e.pipelineSettings=null)},o._tryEnableEditorPreview=function(){void 0!==g&&(this._editorPreview?g.setEditorPipelineSettings(this._settings):this._disableEditorPreview())},o._disableEditorPreview=function(){void 0!==g&&g.getEditorPipelineSettings()===this._settings&&g.setEditorPipelineSettings(null)},i(t,[{key:"editorPreview",get:function(){return this._editorPreview},set:function(e){this._editorPreview=e}},{key:"MsaaEnable",get:function(){return this._settings.msaa.enabled},set:function(e){this._settings.msaa.enabled=e}},{key:"msaaSampleCount",get:function(){return this._settings.msaa.sampleCount},set:function(e){e=Math.pow(2,Math.ceil(Math.log2(Math.max(e,2)))),e=Math.min(e,4),this._settings.msaa.sampleCount=e}},{key:"shadingScaleEnable",get:function(){return this._settings.enableShadingScale},set:function(e){this._settings.enableShadingScale=e}},{key:"shadingScale",get:function(){return this._settings.shadingScale},set:function(e){this._settings.shadingScale=e}},{key:"bloomEnable",get:function(){return this._settings.bloom.enabled},set:function(e){this._settings.bloom.enabled=e}},{key:"bloomType",get:function(){return this._settings.bloom.type},set:function(e){this._settings.bloom.type=e}},{key:"kawaseBloomMaterial",get:function(){return this._settings.bloom.kawaseFilterMaterial},set:function(e){this._settings.bloom.kawaseFilterMaterial!==e&&(this._settings.bloom.kawaseFilterMaterial=e)}},{key:"mipmapBloomMaterial",get:function(){return this._settings.bloom.mipmapFilterMaterial},set:function(e){this._settings.bloom.mipmapFilterMaterial!==e&&(this._settings.bloom.mipmapFilterMaterial=e)}},{key:"bloomEnableAlphaMask",get:function(){return this._settings.bloom.enableAlphaMask},set:function(e){this._settings.bloom.enableAlphaMask=e}},{key:"bloomIterations",get:function(){return this._settings.bloom.iterations},set:function(e){this._settings.bloom.iterations=e}},{key:"bloomThreshold",get:function(){return this._settings.bloom.threshold},set:function(e){this._settings.bloom.threshold=e}},{key:"bloomIntensity",get:function(){return this._settings.bloom.intensity},set:function(e){this._settings.bloom.intensity=e}},{key:"colorGradingEnable",get:function(){return this._settings.colorGrading.enabled},set:function(e){this._settings.colorGrading.enabled=e}},{key:"colorGradingMaterial",get:function(){return this._settings.colorGrading.material},set:function(e){this._settings.colorGrading.material!==e&&(this._settings.colorGrading.material=e)}},{key:"colorGradingContribute",get:function(){return this._settings.colorGrading.contribute},set:function(e){this._settings.colorGrading.contribute=e}},{key:"colorGradingMap",get:function(){return this._settings.colorGrading.colorGradingMap},set:function(e){this._settings.colorGrading.colorGradingMap=e}},{key:"fxaaEnable",get:function(){return this._settings.fxaa.enabled},set:function(e){this._settings.fxaa.enabled=e}},{key:"fxaaMaterial",get:function(){return this._settings.fxaa.material},set:function(e){this._settings.fxaa.material!==e&&(this._settings.fxaa.material=e)}},{key:"fsrEnable",get:function(){return this._settings.fsr.enabled},set:function(e){this._settings.fsr.enabled=e}},{key:"fsrMaterial",get:function(){return this._settings.fsr.material},set:function(e){this._settings.fsr.material!==e&&(this._settings.fsr.material=e)}},{key:"fsrSharpness",get:function(){return this._settings.fsr.sharpness},set:function(e){this._settings.fsr.sharpness=e}},{key:"toneMappingMaterial",get:function(){return this._settings.toneMapping.material},set:function(e){this._settings.toneMapping.material!==e&&(this._settings.toneMapping.material=e)}}]),t}(m)).prototype,"_settings",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b()}}),Z=t(q.prototype,"_editorPreview",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(q.prototype,"editorPreview",[y],Object.getOwnPropertyDescriptor(q.prototype,"editorPreview"),q.prototype),t(q.prototype,"MsaaEnable",[v],Object.getOwnPropertyDescriptor(q.prototype,"MsaaEnable"),q.prototype),t(q.prototype,"msaaSampleCount",[R],Object.getOwnPropertyDescriptor(q.prototype,"msaaSampleCount"),q.prototype),t(q.prototype,"shadingScaleEnable",[T],Object.getOwnPropertyDescriptor(q.prototype,"shadingScaleEnable"),q.prototype),t(q.prototype,"shadingScale",[C],Object.getOwnPropertyDescriptor(q.prototype,"shadingScale"),q.prototype),t(q.prototype,"bloomEnable",[E],Object.getOwnPropertyDescriptor(q.prototype,"bloomEnable"),q.prototype),t(q.prototype,"bloomType",[x,A],Object.getOwnPropertyDescriptor(q.prototype,"bloomType"),q.prototype),t(q.prototype,"kawaseBloomMaterial",[D],Object.getOwnPropertyDescriptor(q.prototype,"kawaseBloomMaterial"),q.prototype),t(q.prototype,"mipmapBloomMaterial",[F],Object.getOwnPropertyDescriptor(q.prototype,"mipmapBloomMaterial"),q.prototype),t(q.prototype,"bloomEnableAlphaMask",[L],Object.getOwnPropertyDescriptor(q.prototype,"bloomEnableAlphaMask"),q.prototype),t(q.prototype,"bloomIterations",[O],Object.getOwnPropertyDescriptor(q.prototype,"bloomIterations"),q.prototype),t(q.prototype,"bloomThreshold",[B],Object.getOwnPropertyDescriptor(q.prototype,"bloomThreshold"),q.prototype),t(q.prototype,"bloomIntensity",[N,G],Object.getOwnPropertyDescriptor(q.prototype,"bloomIntensity"),q.prototype),t(q.prototype,"colorGradingEnable",[Q],Object.getOwnPropertyDescriptor(q.prototype,"colorGradingEnable"),q.prototype),t(q.prototype,"colorGradingMaterial",[k],Object.getOwnPropertyDescriptor(q.prototype,"colorGradingMaterial"),q.prototype),t(q.prototype,"colorGradingContribute",[H],Object.getOwnPropertyDescriptor(q.prototype,"colorGradingContribute"),q.prototype),t(q.prototype,"colorGradingMap",[z],Object.getOwnPropertyDescriptor(q.prototype,"colorGradingMap"),q.prototype),t(q.prototype,"fxaaEnable",[I],Object.getOwnPropertyDescriptor(q.prototype,"fxaaEnable"),q.prototype),t(q.prototype,"fxaaMaterial",[W],Object.getOwnPropertyDescriptor(q.prototype,"fxaaMaterial"),q.prototype),t(q.prototype,"fsrEnable",[U],Object.getOwnPropertyDescriptor(q.prototype,"fsrEnable"),q.prototype),t(q.prototype,"fsrMaterial",[j],Object.getOwnPropertyDescriptor(q.prototype,"fsrMaterial"),q.prototype),t(q.prototype,"fsrSharpness",[V],Object.getOwnPropertyDescriptor(q.prototype,"fsrSharpness"),q.prototype),t(q.prototype,"toneMappingMaterial",[X],Object.getOwnPropertyDescriptor(q.prototype,"toneMappingMaterial"),q.prototype),K=q))||K)||K)||K)||K)||K)),o._RF.pop()}}})),System.register("chunks:///_virtual/builtin-pipeline-types.ts",["cc"],(function(e){var t,a,i;return{setters:[function(e){t=e.cclegacy,a=e.gfx,i=e.ccenum}],execute:function(){e({fillRequiredBloom:d,fillRequiredColorGrading:h,fillRequiredFSR:p,fillRequiredFXAA:c,fillRequiredHBAO:function(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.radiusScale&&(e.radiusScale=1),void 0===e.angleBiasDegree&&(e.angleBiasDegree=10),void 0===e.blurSharpness&&(e.blurSharpness=3),void 0===e.aoSaturation&&(e.aoSaturation=1),void 0===e.needBlur&&(e.needBlur=!1)},fillRequiredMSAA:o,fillRequiredPipelineSettings:function(e){e.msaa?o(e.msaa):e.msaa=r(),void 0===e.enableShadingScale&&(e.enableShadingScale=!1),void 0===e.shadingScale&&(e.shadingScale=.5),e.bloom?d(e.bloom):e.bloom=l(),e.toneMapping?u(e.toneMapping):e.toneMapping={material:null},e.colorGrading?h(e.colorGrading):e.colorGrading={enabled:!1,material:null,contribute:1,colorGradingMap:null},e.fsr?p(e.fsr):e.fsr={enabled:!1,material:null,sharpness:.8},e.fxaa?c(e.fxaa):e.fxaa={enabled:!1,material:null}},fillRequiredToneMapping:u,makeBloom:l,makeColorGrading:function(){return{enabled:!1,material:null,contribute:1,colorGradingMap:null}},makeFSR:function(){return{enabled:!1,material:null,sharpness:.8}},makeFXAA:function(){return{enabled:!1,material:null}},makeHBAO:function(){return{enabled:!1,radiusScale:1,angleBiasDegree:10,blurSharpness:3,aoSaturation:1,needBlur:!1}},makeMSAA:r,makePipelineSettings:function(){return{msaa:r(),enableShadingScale:!1,shadingScale:.5,bloom:l(),toneMapping:{material:null},colorGrading:{enabled:!1,material:null,contribute:1,colorGradingMap:null},fsr:{enabled:!1,material:null,sharpness:.8},fxaa:{enabled:!1,material:null}}},makeToneMapping:function(){return{material:null}}}),t._RF.push({},"cbf30kCUX9A3K+QpVC6wnzx","builtin-pipeline-types",void 0);var n=a.SampleCount;function r(){return{enabled:!1,sampleCount:n.X4}}function o(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.sampleCount&&(e.sampleCount=n.X4)}var s=e("BloomType",function(e){return e[e.KawaseDualFilter=0]="KawaseDualFilter",e[e.MipmapFilter=1]="MipmapFilter",e}({}));function l(){return{enabled:!1,type:s.KawaseDualFilter,material:null,kawaseFilterMaterial:null,mipmapFilterMaterial:null,enableAlphaMask:!1,iterations:3,threshold:.8,intensity:1}}function d(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.type&&(e.type=s.KawaseDualFilter),void 0===e.material&&(e.material=null),void 0===e.kawaseFilterMaterial&&(e.kawaseFilterMaterial=e.material||null),void 0===e.mipmapFilterMaterial&&(e.mipmapFilterMaterial=null),void 0===e.enableAlphaMask&&(e.enableAlphaMask=!1),void 0===e.iterations&&(e.iterations=3),void 0===e.threshold&&(e.threshold=.8),void 0===e.intensity&&(e.intensity=1)}function h(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null),void 0===e.contribute&&(e.contribute=1),void 0===e.colorGradingMap&&(e.colorGradingMap=null)}function p(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null),void 0===e.sharpness&&(e.sharpness=.8)}function c(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null)}function u(e){void 0===e.material&&(e.material=null)}i(s),t._RF.pop()}}})),System.register("chunks:///_virtual/builtin-pipeline.ts",["./rollupPluginModLoBabelHelpers.js","cc","./builtin-pipeline-types.ts"],(function(e){var t,a,i,n,r,o,s,l,d,h,p,c,u,g,m,f,S,b;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,i=e.geometry,n=e.gfx,r=e.renderer,o=e.Vec2,s=e.Vec4,l=e.rendering,d=e.assert,h=e.clamp,p=e.Vec3,c=e.Material,u=e.Layers,g=e.PipelineEventType,m=e.sys,f=e.pipeline},function(e){S=e.makePipelineSettings,b=e.BloomType}],execute:function(){e("getPingPongRenderTarget",I),a._RF.push({},"ff9b0GZzgRM/obMbHGfCNbk","builtin-pipeline",void 0);var _=i.AABB,w=i.Sphere,P=i.intersect,M=n.ClearFlagBit,y=n.Color,v=n.Format,R=n.FormatFeatureBit,T=n.LoadOp,C=n.StoreOp,E=n.TextureType,x=n.Viewport,A=r.scene,D=A.CameraUsage,F=A.CSMLevel,L=A.LightType;function O(e){return!!(e.clearFlag&(M.COLOR|M.STENCIL<<1))}function B(e,t,a,i,n,r){e.shadowFixedArea||e.csmLevel===F.LEVEL_1?(n.left=0,n.top=0,n.width=Math.trunc(t),n.height=Math.trunc(a)):(n.left=Math.trunc(i%2*.5*t),n.top=r>0?Math.trunc(.5*(1-Math.floor(i/2))*a):Math.trunc(.5*Math.floor(i/2)*a),n.width=Math.trunc(.5*t),n.height=Math.trunc(.5*a)),n.left=Math.max(0,n.left),n.top=Math.max(0,n.top),n.width=Math.max(1,n.width),n.height=Math.max(1,n.height)}var N=e("PipelineConfigs",(function(){this.isWeb=!1,this.isWebGL1=!1,this.isWebGPU=!1,this.isMobile=!1,this.isHDR=!1,this.useFloatOutput=!1,this.toneMappingType=0,this.shadowEnabled=!1,this.shadowMapFormat=v.R32F,this.shadowMapSize=new o(1,1),this.usePlanarShadow=!1,this.screenSpaceSignY=1,this.supportDepthSample=!1,this.mobileMaxSpotLightShadowMaps=1,this.platform=new s(0,0,0,0)}));function G(e,t){var a=R.SAMPLED_TEXTURE|R.LINEAR_FILTER,i=e.device;t.isWeb=!m.isNative,t.isWebGL1=i.gfxAPI===n.API.WEBGL,t.isWebGPU=i.gfxAPI===n.API.WEBGPU,t.isMobile=m.isMobile,t.isHDR=e.pipelineSceneData.isHDR,t.useFloatOutput=e.getMacroBool("CC_USE_FLOAT_OUTPUT"),t.toneMappingType=e.pipelineSceneData.postSettings.toneMappingType;var o=e.pipelineSceneData.shadows;t.shadowEnabled=o.enabled,t.shadowMapFormat=f.supportsR32FloatTexture(e.device)?v.R32F:v.RGBA8,t.shadowMapSize.set(o.size),t.usePlanarShadow=o.enabled&&o.type===r.scene.ShadowType.Planar,t.screenSpaceSignY=e.device.capabilities.screenSpaceSignY,t.supportDepthSample=(e.device.getFormatFeatures(v.DEPTH_STENCIL)&a)===a;var s=i.capabilities.screenSpaceSignY;t.platform.x=t.isMobile?1:0,t.platform.w=.5*s+.5<<1|.5*i.capabilities.clipSpaceSignY+.5}var Q=S(),k=e("CameraConfigs",(function(){this.settings=Q,this.isMainGameWindow=!1,this.renderWindowId=0,this.colorName="",this.depthStencilName="",this.enableFullPipeline=!1,this.enableProfiler=!1,this.remainingPasses=0,this.enableShadingScale=!1,this.shadingScale=1,this.nativeWidth=1,this.nativeHeight=1,this.width=1,this.height=1,this.enableHDR=!1,this.radianceFormat=n.Format.RGBA8,this.copyAndTonemapMaterial=null,this.enableStoreSceneDepth=!1})),H=new y(0,0,0,0);function z(e,t,a,i){d(!!a.copyAndTonemapMaterial);var n=e.addRenderPass(a.nativeWidth,a.nativeHeight,"cc-tone-mapping");return n.addRenderTarget(a.colorName,T.CLEAR,C.STORE,H),n.addTexture(i,"inputTexture"),n.addQueue(l.QueueHint.OPAQUE).addFullscreenQuad(a.copyAndTonemapMaterial,1),n}function I(e,t,a){return e.startsWith(t)?""+t+(1-Number(e.charAt(t.length)))+"_"+a:t+"0_"+a}var W=function(){function e(){this.lights=[],this.shadowEnabledSpotLights=[],this._sphere=w.create(0,0,0,1),this._boundingBox=new _,this._rangedDirLightBoundingBox=new _(0,0,0,.5,.5,.5)}var a=e.prototype;return a.cullLights=function(e,a,i){this.lights.length=0,this.shadowEnabledSpotLights.length=0;for(var n,r=t(e.spotLights);!(n=r()).done;){var o=n.value;o.baked||(w.set(this._sphere,o.position.x,o.position.y,o.position.z,o.range),P.sphereFrustum(this._sphere,a)&&(o.shadowEnabled?this.shadowEnabledSpotLights.push(o):this.lights.push(o)))}for(var s,l=t(e.sphereLights);!(s=l()).done;){var d=s.value;d.baked||(w.set(this._sphere,d.position.x,d.position.y,d.position.z,d.range),P.sphereFrustum(this._sphere,a)&&this.lights.push(d))}for(var h,c=t(e.pointLights);!(h=c()).done;){var u=h.value;u.baked||(w.set(this._sphere,u.position.x,u.position.y,u.position.z,u.range),P.sphereFrustum(this._sphere,a)&&this.lights.push(u))}for(var g,m=t(e.rangedDirLights);!(g=m()).done;){var f=g.value;_.transform(this._boundingBox,this._rangedDirLightBoundingBox,f.node.getWorldMatrix()),P.aabbFrustum(this._boundingBox,a)&&this.lights.push(f)}i&&this.shadowEnabledSpotLights.sort((function(e,t){return p.squaredDistance(i,e.position)-p.squaredDistance(i,t.position)}))},a._addLightQueues=function(e,a){for(var i,n=t(this.lights);!(i=n()).done;){var r=i.value,o=a.addQueue(l.QueueHint.BLEND,"forward-add");switch(r.type){case L.SPHERE:o.name="sphere-light";break;case L.SPOT:o.name="spot-light";break;case L.POINT:o.name="point-light";break;case L.RANGED_DIRECTIONAL:o.name="ranged-directional-light";break;default:o.name="unknown-light"}o.addScene(e,l.SceneFlags.BLEND,r)}},a.addSpotlightShadowPasses=function(e,a,i){for(var n,r=0,o=t(this.shadowEnabledSpotLights);!(n=o()).done;){var s=n.value,d=e.pipelineSceneData.shadows.size,h=e.addRenderPass(d.x,d.y,"default");if(h.name="SpotLightShadowPass"+r,h.addRenderTarget("SpotShadowMap"+r,T.CLEAR,C.STORE,new y(1,1,1,1)),h.addDepthStencil("SpotShadowDepth"+r,T.CLEAR,C.DISCARD),h.addQueue(l.QueueHint.NONE,"shadow-caster").addScene(a,l.SceneFlags.OPAQUE|l.SceneFlags.MASK|l.SceneFlags.SHADOW_CASTER).useLightFrustum(s),++r>=i)break}},a.addLightQueues=function(e,a,i){this._addLightQueues(a,e);for(var n,r=0,o=t(this.shadowEnabledSpotLights);!(n=o()).done;){var s=n.value;if(e.addTexture("SpotShadowMap"+r,"cc_spotShadowMap"),e.addQueue(l.QueueHint.BLEND,"forward-add").addScene(a,l.SceneFlags.BLEND,s),++r>=i)break}},a.addLightPasses=function(e,a,i,n,r,o,s,d,h,p){this._addLightQueues(s,p);for(var c,u=0,g=h.pipelineSceneData.shadows.size,m=t(this.shadowEnabledSpotLights);!(c=m()).done;){var f=c.value,S=h.addRenderPass(g.x,g.y,"default");S.name="SpotlightShadowPass",S.addRenderTarget("ShadowMap"+n,T.CLEAR,C.STORE,new y(1,1,1,1)),S.addDepthStencil("ShadowDepth"+n,T.CLEAR,C.DISCARD),S.addQueue(l.QueueHint.NONE,"shadow-caster").addScene(s,l.SceneFlags.OPAQUE|l.SceneFlags.MASK|l.SceneFlags.SHADOW_CASTER).useLightFrustum(f);var b=++u===this.shadowEnabledSpotLights.length?i:C.STORE;(p=h.addRenderPass(r,o,"default")).name="SpotlightWithShadowMap",p.setViewport(d),p.addRenderTarget(e,T.LOAD),p.addDepthStencil(a,T.LOAD,b),p.addTexture("ShadowMap"+n,"cc_spotShadowMap"),p.addQueue(l.QueueHint.BLEND,"forward-add").addScene(s,l.SceneFlags.BLEND,f)}return p},a.isMultipleLightPassesNeeded=function(){return this.shadowEnabledSpotLights.length>0},e}(),U=e("BuiltinForwardPassBuilder",function(){function e(){this.forwardLighting=new W,this._viewport=new x,this._clearColor=new y(0,0,0,1),this._reflectionProbeClearColor=new p(0,0,0)}var i=e.prototype;return i.getConfigOrder=function(){return e.ConfigOrder},i.getRenderOrder=function(){return e.RenderOrder},i.configCamera=function(e,t,a){a.enableMainLightShadowMap=t.shadowEnabled&&!t.usePlanarShadow&&!!e.scene&&!!e.scene.mainLight&&e.scene.mainLight.shadowEnabled,a.enableMainLightPlanarShadowMap=t.shadowEnabled&&t.usePlanarShadow&&!!e.scene&&!!e.scene.mainLight&&e.scene.mainLight.shadowEnabled,a.enablePlanarReflectionProbe=a.isMainGameWindow||e.cameraUsage===D.SCENE_VIEW||e.cameraUsage===D.GAME_VIEW,a.enableMSAA=a.settings.msaa.enabled&&!a.enableStoreSceneDepth&&!t.isWeb&&!t.isWebGL1,a.enableSingleForwardPass=t.isMobile||a.enableMSAA,++a.remainingPasses},i.windowResize=function(e,t,a,i,n,r,o){var s=l.ResourceFlags,d=l.ResourceResidency,h=i.renderWindowId,p=a.settings,c=a.enableShadingScale?Math.max(Math.floor(r*a.shadingScale),1):r,u=a.enableShadingScale?Math.max(Math.floor(o*a.shadingScale),1):o;if(a.enableMSAA&&(a.enableHDR?e.addTexture("MsaaRadiance"+h,E.TEX2D,a.radianceFormat,c,u,1,1,1,p.msaa.sampleCount,s.COLOR_ATTACHMENT,d.MEMORYLESS):e.addTexture("MsaaRadiance"+h,E.TEX2D,v.RGBA8,c,u,1,1,1,p.msaa.sampleCount,s.COLOR_ATTACHMENT,d.MEMORYLESS),e.addTexture("MsaaDepthStencil"+h,E.TEX2D,v.DEPTH_STENCIL,c,u,1,1,1,p.msaa.sampleCount,s.DEPTH_STENCIL_ATTACHMENT,d.MEMORYLESS)),e.addRenderTarget("ShadowMap"+h,t.shadowMapFormat,t.shadowMapSize.x,t.shadowMapSize.y),e.addDepthStencil("ShadowDepth"+h,v.DEPTH_STENCIL,t.shadowMapSize.x,t.shadowMapSize.y),a.enableSingleForwardPass)for(var g=t.mobileMaxSpotLightShadowMaps,m=0;m!==g;++m)e.addRenderTarget("SpotShadowMap"+m,t.shadowMapFormat,t.shadowMapSize.x,t.shadowMapSize.y),e.addDepthStencil("SpotShadowDepth"+m,v.DEPTH_STENCIL,t.shadowMapSize.x,t.shadowMapSize.y)},i.setup=function(e,t,a,i,n){e.setVec4("g_platform",t.platform);var r=i.window.renderWindowId,o=i.scene,s=o.mainLight;--a.remainingPasses,d(a.remainingPasses>=0),this.forwardLighting.cullLights(o,i.frustum),a.enableMainLightShadowMap&&(d(!!s),this._addCascadedShadowMapPass(e,t,r,s,i)),a.enableSingleForwardPass&&this.forwardLighting.addSpotlightShadowPasses(e,i,t.mobileMaxSpotLightShadowMaps),this._tryAddReflectionProbePasses(e,a,r,s,i.scene),a.remainingPasses>0||a.enableShadingScale?(n.colorName=a.enableShadingScale?"ScaledRadiance0_"+r:"Radiance0_"+r,n.depthStencilName=a.enableShadingScale?"ScaledSceneDepth_"+r:"SceneDepth_"+r):(n.colorName=a.colorName,n.depthStencilName=a.depthStencilName);var l=this._addForwardRadiancePasses(e,t,a,r,i,a.width,a.height,s,n.colorName,n.depthStencilName,!a.enableMSAA,a.enableStoreSceneDepth?C.STORE:C.DISCARD);return a.enableStoreSceneDepth||(n.depthStencilName=""),0===a.remainingPasses&&a.enableShadingScale?z(e,0,a,n.colorName):l},i._addCascadedShadowMapPass=function(e,t,a,i,n){var r=l.QueueHint,o=l.SceneFlags,s=e.pipelineSceneData.shadows.size,d=s.x,h=s.y,p=this._viewport;p.left=p.top=0,p.width=d,p.height=h;var c=e.addRenderPass(d,h,"default");c.name="CascadedShadowMap",c.addRenderTarget("ShadowMap"+a,T.CLEAR,C.STORE,new y(1,1,1,1)),c.addDepthStencil("ShadowDepth"+a,T.CLEAR,C.DISCARD);for(var u=e.pipelineSceneData.csmSupported?i.csmLevel:1,g=0;g!==u;++g){B(i,d,h,g,this._viewport,t.screenSpaceSignY);var m=c.addQueue(r.NONE,"shadow-caster");t.isWebGPU||m.setViewport(this._viewport),m.addScene(n,o.OPAQUE|o.MASK|o.SHADOW_CASTER).useLightFrustum(i,g)}},i._tryAddReflectionProbePasses=function(e,i,o,s,d){var h=a.internal.reflectionProbeManager;if(h)for(var p,c=l.ResourceResidency,u=h.getProbes(),g=0,m=t(u);!(p=m()).done;){var f=p.value;if(f.needRender){var S=f.renderArea(),b=Math.max(Math.floor(S.x),1),_=Math.max(Math.floor(S.y),1);if(f.probeType===r.scene.ProbeType.PLANAR){if(!i.enablePlanarReflectionProbe)continue;var w=f.realtimePlanarTexture.window,P="PlanarProbeRT"+g,M="PlanarProbeDS"+g;e.addRenderWindow(P,i.radianceFormat,b,_,w),e.addDepthStencil(M,n.Format.DEPTH_STENCIL,b,_,c.MEMORYLESS);var y=e.addRenderPass(b,_,"default");y.name="PlanarReflectionProbe"+g,this._buildReflectionProbePass(y,i,o,f.camera,P,M,s,d)}if(4==++g)break}}},i._buildReflectionProbePass=function(e,t,a,i,n,r,o,s){void 0===s&&(s=null);var d=l.QueueHint,h=l.SceneFlags,p=t.enableMSAA?C.DISCARD:C.STORE;if(O(i)){this._reflectionProbeClearColor.x=i.clearColor.x,this._reflectionProbeClearColor.y=i.clearColor.y,this._reflectionProbeClearColor.z=i.clearColor.z;var c=l.packRGBE(this._reflectionProbeClearColor);this._clearColor.x=c.x,this._clearColor.y=c.y,this._clearColor.z=c.z,this._clearColor.w=c.w,e.addRenderTarget(n,T.CLEAR,p,this._clearColor)}else e.addRenderTarget(n,T.LOAD,p);i.clearFlag&M.DEPTH_STENCIL?e.addDepthStencil(r,T.CLEAR,C.DISCARD,i.clearDepth,i.clearStencil,i.clearFlag&M.DEPTH_STENCIL):e.addDepthStencil(r,T.LOAD,C.DISCARD),t.enableMainLightShadowMap&&e.addTexture("ShadowMap"+a,"cc_shadowMap"),e.addQueue(d.NONE,"reflect-map").addScene(i,h.OPAQUE|h.MASK|h.REFLECTION_PROBE,o||void 0,s||void 0)},i._addForwardRadiancePasses=function(e,t,a,i,n,r,o,s,h,p,c,u){void 0===c&&(c=!1),void 0===u&&(u=C.DISCARD);var g=l.QueueHint,m=l.SceneFlags,f=n.clearColor;this._clearColor.x=f.x,this._clearColor.y=f.y,this._clearColor.z=f.z,this._clearColor.w=f.w;var S=n.viewport;this._viewport.left=Math.round(S.x*r),this._viewport.top=Math.round(S.y*o),this._viewport.width=Math.max(Math.round(S.width*r),1),this._viewport.height=Math.max(Math.round(S.height*o),1);var b=!c&&a.enableMSAA;d(!b||a.enableSingleForwardPass);var _=a.enableSingleForwardPass?this._addForwardSingleRadiancePass(e,t,a,i,n,b,r,o,s,h,p,u):this._addForwardMultipleRadiancePasses(e,a,i,n,r,o,s,h,p,u);a.enableMainLightPlanarShadowMap&&this._addPlanarShadowQueue(n,s,_);var w=m.BLEND|(n.geometryRenderer?m.GEOMETRY:m.NONE);return _.addQueue(g.BLEND).addScene(n,w,s||void 0),_},i._addForwardSingleRadiancePass=function(e,t,a,i,n,r,o,s,l,h,p,c){var u;if(d(a.enableSingleForwardPass),r){var g="MsaaRadiance"+i,m="MsaaDepthStencil"+i,f=a.settings.msaa.sampleCount,S=e.addMultisampleRenderPass(o,s,f,0,"default");S.name="MsaaForwardPass",this._buildForwardMainLightPass(S,a,i,n,g,m,C.DISCARD,l),S.resolveRenderTarget(g,h),u=S}else(u=e.addRenderPass(o,s,"default")).name="ForwardPass",this._buildForwardMainLightPass(u,a,i,n,h,p,c,l);return d(void 0!==u),this.forwardLighting.addLightQueues(u,n,t.mobileMaxSpotLightShadowMaps),u},i._addForwardMultipleRadiancePasses=function(e,t,a,i,n,r,o,s,l,h){d(!t.enableSingleForwardPass);var p=e.addRenderPass(n,r,"default");p.name="ForwardPass";var c=this.forwardLighting.isMultipleLightPassesNeeded()?C.STORE:h;return this._buildForwardMainLightPass(p,t,a,i,s,l,c,o),this.forwardLighting.addLightPasses(s,l,h,a,n,r,i,this._viewport,e,p)},i._buildForwardMainLightPass=function(e,t,a,i,n,r,o,s,d){void 0===d&&(d=null);var h=l.QueueHint,p=l.SceneFlags;e.setViewport(this._viewport);var c=t.enableMSAA?C.DISCARD:C.STORE;O(i)?e.addRenderTarget(n,T.CLEAR,c,this._clearColor):e.addRenderTarget(n,T.LOAD,c),i.clearFlag&M.DEPTH_STENCIL?e.addDepthStencil(r,T.CLEAR,o,i.clearDepth,i.clearStencil,i.clearFlag&M.DEPTH_STENCIL):e.addDepthStencil(r,T.LOAD,o),t.enableMainLightShadowMap&&e.addTexture("ShadowMap"+a,"cc_shadowMap"),e.addQueue(h.NONE).addScene(i,p.OPAQUE|p.MASK,s||void 0,d||void 0)},i._addPlanarShadowQueue=function(e,t,a){var i=l.QueueHint,n=l.SceneFlags;a.addQueue(i.BLEND,"planar-shadow").addScene(e,n.SHADOW_CASTER|n.PLANAR_SHADOW|n.BLEND,t||void 0)},e}());function j(e,t){return Math.max(Math.floor(e*t),1)}U.ConfigOrder=100,U.RenderOrder=100;var V=e("BuiltinBloomPassBuilder",function(){function e(){this._clearColorTransparentBlack=new y(0,0,0,0),this._bloomParams=new s(0,0,0,0),this._bloomTexSize=new s(0,0,0,0),this._bloomWidths=[],this._bloomHeights=[],this._bloomTexNames=[],this._bloomUpSampleTexDescs=[],this._bloomDownSampleTexDescs=[],this._prefilterTexDesc={name:"",width:0,height:0},this._originalColorDesc={name:"",width:0,height:0}}var t=e.prototype;return t.getConfigOrder=function(){return 0},t.getRenderOrder=function(){return 200},t.configCamera=function(e,t,a){var i=a.settings.bloom,n=i.type===b.KawaseDualFilter&&!!i.kawaseFilterMaterial||i.type===b.MipmapFilter&&!!i.mipmapFilterMaterial;a.enableBloom=i.enabled&&n,a.enableBloom&&++a.remainingPasses},t.windowResize=function(e,t,a,i){if(a.enableBloom){var n=a.width,r=a.height,o=a.settings.bloom,s=i.renderWindowId,l=a.radianceFormat;if(o.type===b.KawaseDualFilter)for(var d=a.width,h=a.height,p=0;p!==o.iterations+1;++p)d=Math.max(Math.floor(d/2),1),h=Math.max(Math.floor(h/2),1),e.addRenderTarget("BloomTex"+s+"_"+p,l,d,h);else if(o.type===b.MipmapFilter){for(var c=o.iterations,u=0;u!==c+1;++u){if(u<c){var g=Math.pow(.5,u+2);this._bloomDownSampleTexDescs[u]=this.createTexture(e,"DownSampleColor"+s+u,j(n,g),j(r,g),l)}if(u<c-1){var m=Math.pow(.5,c-u-1);this._bloomUpSampleTexDescs[u]=this.createTexture(e,"UpSampleColor"+s+u,j(n,m),j(r,m),l)}}this._originalColorDesc=this.createTexture(e,"OriginalColor"+s,n,r,l),this._prefilterTexDesc=this.createTexture(e,"PrefilterColor"+s,j(n,.5),j(r,.5),l)}}},t.createTexture=function(e,t,a,i,n){var r={name:t,width:a,height:i};return e.addRenderTarget(r.name,n,r.width,r.height),r},t.setup=function(e,t,a,i,n,r){if(!a.enableBloom)return r;--a.remainingPasses,d(a.remainingPasses>=0);var o=a.settings.bloom,s=i.window.renderWindowId;switch(o.type){case b.KawaseDualFilter:var l=o.kawaseFilterMaterial;return d(!!l),this._addKawaseDualFilterBloomPasses(e,t,a,a.settings,l,s,a.width,a.height,n.colorName);case b.MipmapFilter:var h=o.mipmapFilterMaterial;return d(!!h),this._addMipmapFilterBloomPasses(e,t,a,a.settings,h,s,a.width,a.height,n.colorName);default:return r}},t._addKawaseDualFilterBloomPasses=function(e,t,a,i,n,r,o,s,d){var h=l.QueueHint,p=i.bloom.iterations,c=p+1;this._bloomWidths.length=c,this._bloomHeights.length=c,this._bloomWidths[0]=Math.max(Math.floor(o/2),1),this._bloomHeights[0]=Math.max(Math.floor(s/2),1);for(var u=1;u!==c;++u)this._bloomWidths[u]=Math.max(Math.floor(this._bloomWidths[u-1]/2),1),this._bloomHeights[u]=Math.max(Math.floor(this._bloomHeights[u-1]/2),1);this._bloomTexNames.length=c;for(var g=0;g!==c;++g)this._bloomTexNames[g]="BloomTex"+r+"_"+g;this._bloomParams.x=t.useFloatOutput?1:0,this._bloomParams.y=0,this._bloomParams.z=i.bloom.threshold,this._bloomParams.w=i.bloom.enableAlphaMask?1:0;var m=e.addRenderPass(this._bloomWidths[0],this._bloomHeights[0],"cc-bloom-prefilter");m.addRenderTarget(this._bloomTexNames[0],T.CLEAR,C.STORE,this._clearColorTransparentBlack),m.addTexture(d,"inputTexture"),m.setVec4("bloomParams",this._bloomParams),m.addQueue(h.OPAQUE).addFullscreenQuad(n,0);for(var f=1;f!==c;++f){var S=e.addRenderPass(this._bloomWidths[f],this._bloomHeights[f],"cc-bloom-downsample");S.addRenderTarget(this._bloomTexNames[f],T.CLEAR,C.STORE,this._clearColorTransparentBlack),S.addTexture(this._bloomTexNames[f-1],"bloomTexture"),this._bloomTexSize.x=this._bloomWidths[f-1],this._bloomTexSize.y=this._bloomHeights[f-1],S.setVec4("bloomTexSize",this._bloomTexSize),S.addQueue(h.OPAQUE).addFullscreenQuad(n,1)}for(var b=p;b-- >0;){var _=e.addRenderPass(this._bloomWidths[b],this._bloomHeights[b],"cc-bloom-upsample");_.addRenderTarget(this._bloomTexNames[b],T.CLEAR,C.STORE,this._clearColorTransparentBlack),_.addTexture(this._bloomTexNames[b+1],"bloomTexture"),this._bloomTexSize.x=this._bloomWidths[b+1],this._bloomTexSize.y=this._bloomHeights[b+1],_.setVec4("bloomTexSize",this._bloomTexSize),_.addQueue(h.OPAQUE).addFullscreenQuad(n,2)}this._bloomParams.w=i.bloom.intensity;var w=e.addRenderPass(o,s,"cc-bloom-combine");return w.addRenderTarget(d,T.LOAD,C.STORE),w.addTexture(this._bloomTexNames[0],"bloomTexture"),w.setVec4("bloomParams",this._bloomParams),w.addQueue(h.BLEND).addFullscreenQuad(n,3),0===a.remainingPasses?z(e,0,a,d):w},t._addPass=function(e,t,a,i,n,r,o,s,d,h){void 0===s&&(s=T.CLEAR),void 0===d&&(d=H),void 0===h&&(h=l.QueueHint.OPAQUE);var p=e.addRenderPass(t,a,i);return p.addRenderTarget(n,s,C.STORE,d),p.addQueue(h).addFullscreenQuad(r,o),p},t._addMipmapFilterBloomPasses=function(e,t,a,i,n,r,o,s,l){this._bloomParams.x=t.useFloatOutput?1:0,this._bloomParams.x=0,this._bloomParams.z=i.bloom.threshold,this._bloomParams.w=i.bloom.intensity;var d=this._prefilterTexDesc,h=this._addPass(e,d.width,d.height,"cc-bloom-mipmap-prefilter",d.name,n,0);h.addTexture(l,"mainTexture"),h.setVec4("bloomParams",this._bloomParams);for(var p=this._bloomDownSampleTexDescs,c=0;c<p.length;++c){var u=p[c],g=0===c?d:p[c-1],m=g.name;this._bloomTexSize.x=1/g.width,this._bloomTexSize.y=1/g.height,(h=this._addPass(e,u.width,u.height,"cc-bloom-mipmap-downsample",u.name,n,1)).addTexture(m,"mainTexture"),h.setVec4("bloomParams",this._bloomTexSize)}for(var f=p.length-1,S=this._bloomUpSampleTexDescs,b=0;b<S.length;b++){var _=S[b],w=0===b?p[f]:S[b-1],P=w.name;this._bloomTexSize.x=1/w.width,this._bloomTexSize.y=1/w.height,(h=this._addPass(e,_.width,_.height,"cc-bloom-mipmap-upsample",_.name,n,2)).addTexture(P,"mainTexture"),h.addTexture(p[f-1-b].name,"downsampleTexture"),h.setVec4("bloomParams",this._bloomTexSize)}var M=this._addPass(e,o,s,"cc-bloom-mipmap-combine",l,n,3,T.LOAD);return M.addTexture(S[S.length-1].name,"bloomTexture"),M.setVec4("bloomParams",this._bloomParams),0===a.remainingPasses?z(e,0,a,l):M},e}()),X=e("BuiltinToneMappingPassBuilder",function(){function e(){this._colorGradingTexSize=new o(0,0)}var t=e.prototype;return t.getConfigOrder=function(){return 0},t.getRenderOrder=function(){return 300},t.configCamera=function(e,t,a){var i=a.settings;a.enableColorGrading=i.colorGrading.enabled&&!!i.colorGrading.material&&!!i.colorGrading.colorGradingMap,a.enableToneMapping=a.enableHDR||a.enableColorGrading,a.enableToneMapping&&++a.remainingPasses},t.windowResize=function(e,t,a){a.enableColorGrading&&(d(!!a.settings.colorGrading.material),a.settings.colorGrading.material.setProperty("colorGradingMap",a.settings.colorGrading.colorGradingMap))},t.setup=function(e,t,a,i,n,r){if(!a.enableToneMapping)return r;if(--a.remainingPasses,d(a.remainingPasses>=0),0===a.remainingPasses)return this._addCopyAndTonemapPass(e,t,a,a.width,a.height,n.colorName,a.colorName);var o=a.renderWindowId,s=a.enableShadingScale?"ScaledLdrColor":"LdrColor",l=I(n.colorName,s,o),h=n.colorName;return n.colorName=l,this._addCopyAndTonemapPass(e,t,a,a.width,a.height,h,l)},t._addCopyAndTonemapPass=function(e,t,a,i,n,r,o){var s,h=a.settings;if(a.enableColorGrading){d(!!h.colorGrading.material),d(!!h.colorGrading.colorGradingMap);var p=h.colorGrading.colorGradingMap;this._colorGradingTexSize.x=p.width,this._colorGradingTexSize.y=p.height;var c=p.width===p.height;(s=c?e.addRenderPass(i,n,"cc-color-grading-8x8"):e.addRenderPass(i,n,"cc-color-grading-nx1")).addRenderTarget(o,T.CLEAR,C.STORE,H),s.addTexture(r,"sceneColorMap"),s.setVec2("lutTextureSize",this._colorGradingTexSize),s.setFloat("contribute",h.colorGrading.contribute),s.addQueue(l.QueueHint.OPAQUE).addFullscreenQuad(h.colorGrading.material,c?1:0)}else(s=e.addRenderPass(i,n,"cc-tone-mapping")).addRenderTarget(o,T.CLEAR,C.STORE,H),s.addTexture(r,"inputTexture"),h.toneMapping.material?s.addQueue(l.QueueHint.OPAQUE).addFullscreenQuad(h.toneMapping.material,0):(d(!!a.copyAndTonemapMaterial),s.addQueue(l.QueueHint.OPAQUE).addFullscreenQuad(a.copyAndTonemapMaterial,0));return s},e}()),K=e("BuiltinFXAAPassBuilder",function(){function e(){this._fxaaParams=new s(0,0,0,0)}var t=e.prototype;return t.getConfigOrder=function(){return 0},t.getRenderOrder=function(){return 400},t.configCamera=function(e,t,a){a.enableFXAA=a.settings.fxaa.enabled&&!!a.settings.fxaa.material,a.enableFXAA&&++a.remainingPasses},t.setup=function(e,t,a,i,n,r){if(!a.enableFXAA)return r;--a.remainingPasses,d(a.remainingPasses>=0);var o=a.renderWindowId,s=a.enableShadingScale?"ScaledLdrColor":"LdrColor",l=I(n.colorName,s,o);if(d(!!a.settings.fxaa.material),0===a.remainingPasses)return a.enableShadingScale?(this._addFxaaPass(e,t,a.settings.fxaa.material,a.width,a.height,n.colorName,l),z(e,0,a,l)):(d(a.width===a.nativeWidth),d(a.height===a.nativeHeight),this._addFxaaPass(e,t,a.settings.fxaa.material,a.width,a.height,n.colorName,a.colorName));var h=n.colorName;return n.colorName=l,this._addFxaaPass(e,t,a.settings.fxaa.material,a.width,a.height,h,l)},t._addFxaaPass=function(e,t,a,i,n,r,o){this._fxaaParams.x=i,this._fxaaParams.y=n,this._fxaaParams.z=1/i,this._fxaaParams.w=1/n;var s=e.addRenderPass(i,n,"cc-fxaa");return s.addRenderTarget(o,T.CLEAR,C.STORE,H),s.addTexture(r,"sceneColorMap"),s.setVec4("texSize",this._fxaaParams),s.addQueue(l.QueueHint.OPAQUE).addFullscreenQuad(a,0),s},e}()),q=e("BuiltinFsrPassBuilder",function(){function e(){this._fsrParams=new s(0,0,0,0),this._fsrTexSize=new s(0,0,0,0)}var t=e.prototype;return t.getConfigOrder=function(){return 0},t.getRenderOrder=function(){return 500},t.configCamera=function(e,t,a){a.enableFSR=a.settings.fsr.enabled&&!!a.settings.fsr.material&&a.enableShadingScale&&a.shadingScale<1,a.enableFSR&&++a.remainingPasses},t.setup=function(e,t,a,i,n,r){if(!a.enableFSR)return r;--a.remainingPasses;var o=n.colorName,s=0===a.remainingPasses?a.colorName:I(n.colorName,"UiColor",a.renderWindowId);return n.colorName=s,d(!!a.settings.fsr.material),this._addFsrPass(e,t,a,a.settings,a.settings.fsr.material,a.renderWindowId,a.width,a.height,o,a.nativeWidth,a.nativeHeight,s)},t._addFsrPass=function(e,t,a,i,n,r,o,s,d,p,c,u){this._fsrTexSize.x=o,this._fsrTexSize.y=s,this._fsrTexSize.z=p,this._fsrTexSize.w=c,this._fsrParams.x=h(1-i.fsr.sharpness,.02,.98);var g=I(u,"UiColor",r),m=e.addRenderPass(p,c,"cc-fsr-easu");m.addRenderTarget(g,T.CLEAR,C.STORE,H),m.addTexture(d,"outputResultMap"),m.setVec4("fsrTexSize",this._fsrTexSize),m.addQueue(l.QueueHint.OPAQUE).addFullscreenQuad(n,0);var f=e.addRenderPass(p,c,"cc-fsr-rcas");return f.addRenderTarget(u,T.CLEAR,C.STORE,H),f.addTexture(g,"outputResultMap"),f.setVec4("fsrTexSize",this._fsrTexSize),f.setVec4("fsrParams",this._fsrParams),f.addQueue(l.QueueHint.OPAQUE).addFullscreenQuad(n,1),f},e}()),Y=e("BuiltinUiPassBuilder",function(){function e(){}var t=e.prototype;return t.getConfigOrder=function(){return 0},t.getRenderOrder=function(){return 1e3},t.setup=function(e,t,a,i,n,r){d(!!r);var o=l.SceneFlags.UI;return a.enableProfiler&&(o|=l.SceneFlags.PROFILER,r.showStatistics=!0),r.addQueue(l.QueueHint.BLEND,"default","default").addScene(i,o),r},e}());if(l){var Z=l.QueueHint,J=l.SceneFlags,$=function(){function e(){this._pipelineEvent=a.director.root.pipelineEvent,this._forwardPass=new U,this._bloomPass=new V,this._toneMappingPass=new X,this._fxaaPass=new K,this._fsrPass=new q,this._uiPass=new Y,this._clearColor=new y(0,0,0,1),this._viewport=new x,this._configs=new N,this._cameraConfigs=new k,this._copyAndTonemapMaterial=new c,this._initialized=!1,this._passBuilders=[]}var i=e.prototype;return i._setupPipelinePreview=function(e,t){if(e.cameraUsage===D.SCENE_VIEW||e.cameraUsage===D.PREVIEW){var a=l.getEditorPipelineSettings();t.settings=a||Q}else e.pipelineSettings?t.settings=e.pipelineSettings:t.settings=Q},i._preparePipelinePasses=function(e){var a=this._passBuilders;a.length=0;var i=e.settings;if(i._passes){for(var n,r=t(i._passes);!(n=r()).done;){var o=n.value;a.push(o)}d(a.length===i._passes.length)}a.push(this._forwardPass),i.bloom.enabled&&a.push(this._bloomPass),a.push(this._toneMappingPass),i.fxaa.enabled&&a.push(this._fxaaPass),i.fsr.enabled&&a.push(this._fsrPass),a.push(this._uiPass)},i._setupBuiltinCameraConfigs=function(e,t,a,i){var r=t.window,o=t.cameraUsage===D.GAME&&!!r.swapchain,s=o||t.cameraUsage===D.GAME_VIEW;i.isMainGameWindow=o,i.renderWindowId=r.renderWindowId,i.colorName=r.colorName,i.depthStencilName=r.depthStencilName,i.enableFullPipeline=0!=(t.visibility&u.Enum.DEFAULT),i.enableProfiler=e.profiler&&s,i.remainingPasses=0,i.shadingScale=i.settings.shadingScale,i.enableShadingScale=i.settings.enableShadingScale&&1!==i.shadingScale,i.nativeWidth=Math.max(Math.floor(r.width),1),i.nativeHeight=Math.max(Math.floor(r.height),1),i.width=i.enableShadingScale?Math.max(Math.floor(i.nativeWidth*i.shadingScale),1):i.nativeWidth,i.height=i.enableShadingScale?Math.max(Math.floor(i.nativeHeight*i.shadingScale),1):i.nativeHeight,i.enableHDR=i.enableFullPipeline&&a.useFloatOutput,i.radianceFormat=i.enableHDR?n.Format.RGBA16F:n.Format.RGBA8,i.copyAndTonemapMaterial=this._copyAndTonemapMaterial,i.enableStoreSceneDepth=!1},i._setupCameraConfigs=function(e,a,i,n){this._setupPipelinePreview(a,n),this._preparePipelinePasses(n),this._passBuilders.sort((function(e,t){return e.getConfigOrder()-t.getConfigOrder()})),this._setupBuiltinCameraConfigs(e,a,i,n);for(var r,o=t(this._passBuilders);!(r=o()).done;){var s=r.value;s.configCamera&&s.configCamera(a,i,n)}},i.windowResize=function(e,a,i,n,r){G(e,this._configs),this._setupCameraConfigs(e,i,this._configs,this._cameraConfigs);var o=a.renderWindowId;e.addRenderWindow(this._cameraConfigs.colorName,v.RGBA8,n,r,a,this._cameraConfigs.depthStencilName);var s=this._cameraConfigs.width,l=this._cameraConfigs.height;this._cameraConfigs.enableShadingScale?(e.addDepthStencil("ScaledSceneDepth_"+o,v.DEPTH_STENCIL,s,l),e.addRenderTarget("ScaledRadiance0_"+o,this._cameraConfigs.radianceFormat,s,l),e.addRenderTarget("ScaledRadiance1_"+o,this._cameraConfigs.radianceFormat,s,l),e.addRenderTarget("ScaledLdrColor0_"+o,v.RGBA8,s,l),e.addRenderTarget("ScaledLdrColor1_"+o,v.RGBA8,s,l)):(e.addDepthStencil("SceneDepth_"+o,v.DEPTH_STENCIL,s,l),e.addRenderTarget("Radiance0_"+o,this._cameraConfigs.radianceFormat,s,l),e.addRenderTarget("Radiance1_"+o,this._cameraConfigs.radianceFormat,s,l),e.addRenderTarget("LdrColor0_"+o,v.RGBA8,s,l),e.addRenderTarget("LdrColor1_"+o,v.RGBA8,s,l)),e.addRenderTarget("UiColor0_"+o,v.RGBA8,n,r),e.addRenderTarget("UiColor1_"+o,v.RGBA8,n,r);for(var d,h=t(this._passBuilders);!(d=h()).done;){var p=d.value;p.windowResize&&p.windowResize(e,this._configs,this._cameraConfigs,a,i,n,r)}},i.setup=function(e,a){if(!this._initMaterials(a))for(var i,n=t(e);!(i=n()).done;){var r=i.value;r.scene&&r.window&&(this._setupCameraConfigs(a,r,this._configs,this._cameraConfigs),this._pipelineEvent.emit(g.RENDER_CAMERA_BEGIN,r),this._cameraConfigs.enableFullPipeline?this._buildForwardPipeline(a,r,r.scene,this._passBuilders):this._buildSimplePipeline(a,r),this._pipelineEvent.emit(g.RENDER_CAMERA_END,r))}},i._buildSimplePipeline=function(e,t){var a=Math.max(Math.floor(t.window.width),1),i=Math.max(Math.floor(t.window.height),1),n=this._cameraConfigs.colorName,r=this._cameraConfigs.depthStencilName,o=t.viewport;this._viewport.left=Math.round(o.x*a),this._viewport.top=Math.round(o.y*i),this._viewport.width=Math.max(Math.round(o.width*a),1),this._viewport.height=Math.max(Math.round(o.height*i),1);var s=t.clearColor;this._clearColor.x=s.x,this._clearColor.y=s.y,this._clearColor.z=s.z,this._clearColor.w=s.w;var l=e.addRenderPass(a,i,"default");O(t)?l.addRenderTarget(n,T.CLEAR,C.STORE,this._clearColor):l.addRenderTarget(n,T.LOAD,C.STORE),t.clearFlag&M.DEPTH_STENCIL?l.addDepthStencil(r,T.CLEAR,C.DISCARD,t.clearDepth,t.clearStencil,t.clearFlag&M.DEPTH_STENCIL):l.addDepthStencil(r,T.LOAD,C.DISCARD),l.setViewport(this._viewport),l.addQueue(Z.OPAQUE).addScene(t,J.OPAQUE);var d=J.BLEND|J.UI;this._cameraConfigs.enableProfiler&&(d|=J.PROFILER,l.showStatistics=!0),l.addQueue(Z.BLEND).addScene(t,d)},i._buildForwardPipeline=function(e,a,i,n){!function(e){e.sort((function(e,t){return e.getRenderOrder()-t.getRenderOrder()}))}(n);for(var r,o={colorName:"",depthStencilName:""},s=void 0,l=t(n);!(r=l()).done;){var h=r.value;h.setup&&(s=h.setup(e,this._configs,this._cameraConfigs,a,o,s))}d(0===this._cameraConfigs.remainingPasses)},i._initMaterials=function(e){return this._initialized?0:(G(e,this._configs),this._copyAndTonemapMaterial._uuid="builtin-pipeline-tone-mapping-material",this._copyAndTonemapMaterial.initialize({effectName:"pipeline/post-process/tone-mapping"}),this._copyAndTonemapMaterial.effectAsset&&(this._initialized=!0),this._initialized?0:1)},e}();l.setCustomPipeline("Builtin",new $)}a._RF.pop()}}})),System.register("chunks:///_virtual/internal",["./builtin-pipeline-settings.ts","./builtin-pipeline-types.ts","./builtin-pipeline.ts"],(function(){return{setters:[null,null,null],execute:function(){}}})),o="virtual:///prerequisite-imports/internal",s="chunks:///_virtual/internal",System.register(o,[s],(function(e,t){return{setters:[function(t){var a={};for(var i in t)"default"!==i&&"__esModule"!==i&&(a[i]=t[i]);e(a)}],execute:function(){}}})),e("default",i.exports)}),{})}}}));

System.register("chunks:///_virtual/index.mjs_cjs=&original=.js",["./index.js","./cjs-loader.mjs"],(function(e,t){var r,n;return{setters:[function(t){r=t.__cjsMetaURL;var n={};n.__cjsMetaURL=t.__cjsMetaURL,n.default=t.default,e(n)},function(e){n=e.default}],execute:function(){r||n.throwInvalidWrapper("./index.js",t.meta.url),n.require(r)}}}));

System.register("chunks:///_virtual/index.mjs_cjs=&original=2.js",["./index2.js","./cjs-loader.mjs"],(function(e,t){var r,n;return{setters:[function(t){r=t.__cjsMetaURL;var n={};n.__cjsMetaURL=t.__cjsMetaURL,n.default=t.default,e(n)},function(e){n=e.default}],execute:function(){r||n.throwInvalidWrapper("./index.js",t.meta.url),n.require(r)}}}));

System.register("chunks:///_virtual/index2.js",["./cjs-loader.mjs"],(function(t,e){var i;return{setters:[function(t){i=t.default}],execute:function(){t("default",void 0);var n=t("__cjsMetaURL",e.meta.url);i.define(n,(function(e,i,n,o,r){var s,a;System.register("chunks:///_virtual/Ball.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,s,a,l,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,l=t.UITransform,c=t.Vec3,u=t.Component}],execute:function(){var h,p,d,f,g,y,v,b,M,m;r._RF.push({},"e5268vX12RA4Kq8AGcwpFxJ","Ball",void 0);var S=s.ccclass,T=s.property;t("Ball",(h=S("Ball"),p=T(a),d=T(a),f=T(a),h((v=e((y=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"speed",v,o(e)),n(e,"paddleLeft",b,o(e)),n(e,"paddleRight",M,o(e)),n(e,"scoreManager",m,o(e)),e.direction=new c(1,1,0),e.ballRadius=10,e.fieldWidth=1280,e.fieldHeight=680,e}i(e,t);var r=e.prototype;return r.start=function(){this.resetBall()},r.update=function(t){var e=this.node.position;e.x+=this.direction.x*this.speed*t,e.y+=this.direction.y*this.speed*t;var i=this.fieldHeight/2-this.ballRadius;(e.y>i||e.y<-i)&&(this.direction.y*=-1,e.y=Math.min(Math.max(e.y,-i),i)),this.paddleLeft&&this.checkCollision(this.paddleLeft,e,1)&&(this.direction.x=1),this.paddleRight&&this.checkCollision(this.paddleRight,e,-1)&&(this.direction.x=-1);var n=this.fieldWidth/2;e.x<-n-this.ballRadius?this.onScore("right"):e.x>n+this.ballRadius&&this.onScore("left"),this.node.setPosition(e)},r.checkCollision=function(t,e,i){var n=t.position,o=t.getComponent(l);if(!o)return!1;var r=o.width/2,s=o.height/2,a=n.x-r,c=n.x+r,u=n.y+s,h=n.y-s;return e.x+this.ballRadius>a&&e.x-this.ballRadius<c&&e.y+this.ballRadius>h&&e.y-this.ballRadius<u&&(e.x=n.x+i*(r+this.ballRadius+1),!0)},r.onScore=function(t){if(this.scoreManager){var e=this.scoreManager.getComponent("ScoreManager");e&&e.addScore(t)}this.resetBall(t)},r.resetBall=function(t){this.node.setPosition(new c(0,0,0));var e="left"===t?1:"right"===t||Math.random()<.5?-1:1,i=Math.random()<.5?-1:1;this.direction.set(e,i,0)},e}(u)).prototype,"speed",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 600}}),b=e(y.prototype,"paddleLeft",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(y.prototype,"paddleRight",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(y.prototype,"scoreManager",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=y))||g)),r._RF.pop()}}})),System.register("chunks:///_virtual/main",["./Ball.ts","./Paddle.ts","./PaddleRightAI.ts","./ScoreManager.ts"],(function(){return{setters:[null,null,null,null],execute:function(){}}})),System.register("chunks:///_virtual/Paddle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,s,a,l,c,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.input,l=t.Input,c=t.view,u=t.Vec3,h=t.Component}],execute:function(){var p,d,f,g;r._RF.push({},"4e62cc0fktL+JVhYrTFf8pS","Paddle",void 0);var y=s.ccclass,v=s.property;t("PaddleSwipe",y("PaddleSwipe")((f=e((d=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"boundY",f,o(e)),n(e,"sensitivity",g,o(e)),e.isDragging=!1,e.lastY=0,e.targetY=0,e}i(e,t);var r=e.prototype;return r.onLoad=function(){a.on(l.EventType.MOUSE_DOWN,this.onMouseDown,this),a.on(l.EventType.MOUSE_MOVE,this.onMouseMove,this),a.on(l.EventType.MOUSE_UP,this.onMouseUp,this),a.on(l.EventType.TOUCH_START,this.onTouchStart,this),a.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),a.on(l.EventType.TOUCH_END,this.onTouchEnd,this)},r.onMouseDown=function(t){this.isDragging=!0,this.lastY=t.getLocationY()},r.onMouseMove=function(t){if(this.isDragging){var e=(t.getLocationY()-this.lastY)*this.sensitivity;this.movePaddle(e),this.lastY=t.getLocationY()}},r.onMouseUp=function(t){this.isDragging=!1},r.onTouchStart=function(t){this.isDragging=!0;var e=t.getLocation();this.lastY=e.y},r.onTouchMove=function(t){if(this.isDragging){var e=t.getLocation(),i=(e.y-this.lastY)*this.sensitivity;this.movePaddle(i),this.lastY=e.y}},r.onTouchEnd=function(t){this.isDragging=!1},r.movePaddle=function(t){var e=this.node.position,i=e.y+t*(720/c.getVisibleSize().height);i=Math.min(Math.max(i,-this.boundY),this.boundY),this.node.setPosition(new u(e.x,i,e.z))},r.onDestroy=function(){a.off(l.EventType.MOUSE_DOWN,this.onMouseDown,this),a.off(l.EventType.MOUSE_MOVE,this.onMouseMove,this),a.off(l.EventType.MOUSE_UP,this.onMouseUp,this),a.off(l.EventType.TOUCH_START,this.onTouchStart,this),a.off(l.EventType.TOUCH_MOVE,this.onTouchMove,this),a.off(l.EventType.TOUCH_END,this.onTouchEnd,this)},e}(h)).prototype,"boundY",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),g=e(d.prototype,"sensitivity",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p=d))||p),r._RF.pop()}}})),System.register("chunks:///_virtual/PaddleRightAI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,s,a,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,l=t.Component}],execute:function(){var c,u,h,p,d,f;r._RF.push({},"c8b4fOw8WlN5YPliY3Bf7Kk","PaddleRightAI",void 0);var g=s.ccclass,y=s.property;t("PaddleRight",(c=g("PaddleRight"),u=y(a),c((d=e((p=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"ball",d,o(e)),n(e,"speed",f,o(e)),e}return i(e,t),e.prototype.update=function(t){if(this.ball){var e=this.node.position,i=this.ball.position.y-e.y,n=Math.sign(i)*this.speed*t;e.y+=Math.abs(i)<Math.abs(n)?i:n,e.y=Math.min(260,Math.max(-260,e.y)),this.node.setPosition(e)}},e}(l)).prototype,"ball",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=e(p.prototype,"speed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 400}}),h=p))||h)),r._RF.pop()}}})),System.register("chunks:///_virtual/ScoreManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,s,a,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Label,l=t.Component}],execute:function(){var c,u,h,p,d;r._RF.push({},"c387b1ny+JLD7+r8CGSg1EE","ScoreManager",void 0);var f=s.ccclass,g=s.property;t("ScoreManager",(c=f("ScoreManager"),u=g(a),c((d=e((p=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"scoreLabel",d,o(e)),e.leftScore=0,e.rightScore=0,e}i(e,t);var r=e.prototype;return r.addScore=function(t){"left"===t?this.leftScore++:this.rightScore++,this.updateLabel()},r.updateLabel=function(){this.scoreLabel&&(this.scoreLabel.string=this.leftScore+" : "+this.rightScore)},e}(l)).prototype,"scoreLabel",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=p))||h)),r._RF.pop()}}})),s="virtual:///prerequisite-imports/main",a="chunks:///_virtual/main",System.register(s,[a],(function(t,e){return{setters:[function(e){var i={};for(var n in e)"default"!==n&&"__esModule"!==n&&(i[n]=e[n]);t(i)}],execute:function(){}}})),t("default",n.exports)}),{})}}}));

System.register("chunks:///_virtual/main",["./index.mjs_cjs=&original=.js","./index.mjs_cjs=&original=2.js","./Ball.ts","./GameManager.ts","./Paddle.ts","./PaddleRightAI.ts","./Particle.ts","./ScoreManager.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Paddle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,n,o,e,s,a,h,r,u,c,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,h=t.input,r=t.Input,u=t.view,c=t.Vec3,p=t.Component}],execute:function(){var l,f,v,g;s._RF.push({},"4e62cc0fktL+JVhYrTFf8pS","Paddle",void 0);var T=a.ccclass,y=a.property;t("PaddleSwipe",T("PaddleSwipe")((v=i((f=function(t){function i(){for(var i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,o(i,"boundY",v,e(i)),o(i,"sensitivity",g,e(i)),i.isDragging=!1,i.lastY=0,i.targetY=0,i}n(i,t);var s=i.prototype;return s.onLoad=function(){h.on(r.EventType.MOUSE_DOWN,this.onMouseDown,this),h.on(r.EventType.MOUSE_MOVE,this.onMouseMove,this),h.on(r.EventType.MOUSE_UP,this.onMouseUp,this),h.on(r.EventType.TOUCH_START,this.onTouchStart,this),h.on(r.EventType.TOUCH_MOVE,this.onTouchMove,this),h.on(r.EventType.TOUCH_END,this.onTouchEnd,this)},s.onMouseDown=function(t){this.isDragging=!0,this.lastY=t.getLocationY()},s.onMouseMove=function(t){if(this.isDragging){var i=(t.getLocationY()-this.lastY)*this.sensitivity;this.movePaddle(i),this.lastY=t.getLocationY()}},s.onMouseUp=function(t){this.isDragging=!1},s.onTouchStart=function(t){this.isDragging=!0;var i=t.getLocation();this.lastY=i.y},s.onTouchMove=function(t){if(this.isDragging){var i=t.getLocation(),n=(i.y-this.lastY)*this.sensitivity;this.movePaddle(n),this.lastY=i.y}},s.onTouchEnd=function(t){this.isDragging=!1},s.movePaddle=function(t){var i=this.node.position,n=i.y+t*(720/u.getVisibleSize().height);n=Math.min(Math.max(n,-this.boundY),this.boundY),this.node.setPosition(new c(i.x,n,i.z))},s.onDestroy=function(){h.off(r.EventType.MOUSE_DOWN,this.onMouseDown,this),h.off(r.EventType.MOUSE_MOVE,this.onMouseMove,this),h.off(r.EventType.MOUSE_UP,this.onMouseUp,this),h.off(r.EventType.TOUCH_START,this.onTouchStart,this),h.off(r.EventType.TOUCH_MOVE,this.onTouchMove,this),h.off(r.EventType.TOUCH_END,this.onTouchEnd,this)},i}(p)).prototype,"boundY",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),g=i(f.prototype,"sensitivity",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),l=f))||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/PaddleRightAI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,a,o,l,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,l=t.Node,s=t.Component}],execute:function(){var c,p,u,h,d,f;a._RF.push({},"c8b4fOw8WlN5YPliY3Bf7Kk","PaddleRightAI",void 0);var y=o.ccclass,b=o.property;t("PaddleRight",(c=y("PaddleRight"),p=b(l),c((d=e((h=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"ball",d,r(e)),n(e,"speed",f,r(e)),e}return i(e,t),e.prototype.update=function(t){if(this.ball){var e=this.node.position,i=this.ball.position.y-e.y,n=Math.sign(i)*this.speed*t;e.y+=Math.abs(i)<Math.abs(n)?i:n,e.y=Math.min(260,Math.max(-260,e.y)),this.node.setPosition(e)}},e}(s)).prototype,"ball",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=e(h.prototype,"speed",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 400}}),u=h))||u));a._RF.pop()}}}));

System.register("chunks:///_virtual/Particle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,r,n,o,l,a,u,s;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Node,u=e.ParticleSystem,s=e.Component}],execute:function(){var c,p,f,h,b,y,F,g,m;o._RF.push({},"20d5clYeexMd50xZ6T33Q6g","Particle",void 0);var d=l.ccclass,v=l.property;e("Particle",(c=d("Particle"),p=v(a),f=v(a),h=v(a),c((F=i((y=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return i=e.call.apply(e,[this].concat(o))||this,r(i,"ball",F,n(i)),r(i,"innerFire",g,n(i)),r(i,"outerFire",m,n(i)),i}t(i,e);var o=i.prototype;return o.start=function(){if(this.innerFire){var e=this.innerFire.getComponent(u);null==e||e.resetSystem()}if(this.outerFire){var i=this.outerFire.getComponent(u);null==i||i.resetSystem()}},o.update=function(e){this.ball&&(this.innerFire&&(this.innerFire.position=this.ball.position),this.outerFire&&(this.outerFire.position=this.ball.position))},i}(s)).prototype,"ball",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=i(y.prototype,"innerFire",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(y.prototype,"outerFire",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,o,i,n,c,a,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,c=e._decorator,a=e.Label,l=e.Component}],execute:function(){var s,u,p,h,f;n._RF.push({},"c387b1ny+JLD7+r8CGSg1EE","ScoreManager",void 0);var g=c.ccclass,S=c.property;e("ScoreManager",(s=g("ScoreManager"),u=S(a),s((f=r((h=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return r=e.call.apply(e,[this].concat(n))||this,o(r,"scoreLabel",f,i(r)),r.leftScore=0,r.rightScore=0,r}t(r,e);var n=r.prototype;return n.addScore=function(e){"left"===e?this.leftScore++:this.rightScore++,this.updateLabel()},n.updateLabel=function(){this.scoreLabel&&(this.scoreLabel.string=this.leftScore+" : "+this.rightScore)},r}(l)).prototype,"scoreLabel",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=h))||p));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});